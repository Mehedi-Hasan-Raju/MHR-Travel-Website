<% layout('layouts/boilerplate') %>

<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="dashboard-sidebar">
    <h3>Host Dashboard</h3>
    <ul>
      <li>
        <a href="/host/dashboard?tab=listings" class="<%= tab==='listings' ? 'active' : '' %>">üè† Listings</a>
      </li>
      <li>
        <a href="/host/dashboard?tab=booked" class="<%= tab==='booked' ? 'active' : '' %>">üìÖ Booked</a>
      </li>
      <li>
        <a href="/host/dashboard?tab=messages" class="<%= tab==='messages' ? 'active' : '' %>">üí¨ Messages</a>
      </li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="dashboard-content">
    <% if(tab === 'listings') { %>
      <h2>My Listings</h2>
      <% if(listings.length === 0) { %>
        <p>No listings yet. <a href="/listings/new">Create one</a></p>
      <% } else { %>
        <div class="card-grid">
          <% listings.forEach(listing => { %>
            <div class="card">
              <img src="<%= listing.image.url %>" alt="<%= listing.title %>">
              <div class="card-body">
                <h4><%= listing.title %></h4>
                <p><%= listing.location %></p>
              </div>
            </div>
          <% }) %>
        </div>
      <% } %>

    <% } else if(tab === 'booked') { %>
      <h2>Bookings on My Listings</h2>
      <% if(bookings.length === 0) { %>
        <p>No bookings yet.</p>
      <% } else { %>
        <div class="card-grid">
          <% bookings.forEach(booking => { %>
            <div class="card">
              <img src="<%= booking.listing.image.url %>" alt="<%= booking.listing.title %>">
              <div class="card-body">
                <h4><%= booking.listing.title %></h4>
                <p><b>Booked by:</b> <%= booking.user.username %></p>
                <p><b>Date:</b> <%= booking.date.toDateString() %></p>
              </div>
            </div>
          <% }) %>
        </div>
      <% } %>

    <% } else if(tab === 'messages') { %>
      <h2>Messages</h2>
      <p>üí¨ This feature is coming soon...</p>
    <% } %>
  </main>
</div>

<style>
.dashboard-container {
  display: flex;
  min-height: 100vh;
  font-family: Arial, sans-serif;
  background: #fff;
}

.dashboard-sidebar {
  width: 250px;
  padding: 20px;
  border-right: 1px solid #eee;
}

.dashboard-sidebar h3 {
  margin-bottom: 30px;
}

.dashboard-sidebar ul {
  list-style: none;
  padding: 0;
}

.dashboard-sidebar li {
  margin-bottom: 15px;
}

.dashboard-sidebar a {
  text-decoration: none;
  color: #666;
  font-weight: normal;
  transition: color 0.2s;
}

.dashboard-sidebar a.active {
  color: black;
  font-weight: bold;
}

.dashboard-content {
  flex: 1;
  padding: 40px;
}

.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.card {
  border: 1px solid #ddd;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.card img {
  width: 100%;
  height: 150px;
  object-fit: cover;
}

.card-body {
  padding: 15px;
}

.card-body h4 {
  margin: 0 0 10px 0;
}
</style>
